"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.headlessConfig = void 0;
const utils_1 = require("../utils");
let wpeConfig = {};
function normalizeConfig(config) {
    let { uriPrefix, pagination } = config;
    if (!uriPrefix) {
        uriPrefix = '';
    }
    uriPrefix = uriPrefix.trim();
    if (/\/$/.test(uriPrefix)) {
        uriPrefix = uriPrefix.slice(0, -1);
    }
    if (!pagination) {
        pagination = {
            after: 'after/%cursor%',
            before: 'before/%cursor%',
            replace(url) {
                return url.replace(/\/?(after|before)\/[^/]+/, '');
            },
        };
    }
    pagination.after = utils_1.trimSlashes(pagination.after);
    pagination.before = utils_1.trimSlashes(pagination.before);
    return Object.assign(Object.assign({}, config), { uriPrefix, pagination });
}
function headlessConfig(config) {
    if (config) {
        wpeConfig = config;
    }
    wpeConfig = normalizeConfig(wpeConfig);
    return wpeConfig;
}
exports.headlessConfig = headlessConfig;
